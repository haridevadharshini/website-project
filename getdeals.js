!function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(t){function e(t){return"function"==typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(t,e){return null!=t&&"object"==typeof t&&e in t}function i(t){return!function(t,e){return u.call(t,e)}(h,t)}function a(t){this.string=t,this.tail=t,this.pos=0}function o(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function s(){this.cache={}}var c=Object.prototype.toString,l=Array.isArray||function(t){return"[object Array]"===c.call(t)},u=RegExp.prototype.test,h=/\S/,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},f=/\s*/,d=/\s+/,g=/\s*=/,v=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/;a.prototype.eos=function(){return""===this.tail},a.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var r=e[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},a.prototype.scanUntil=function(t){var e,r=this.tail.search(t);switch(r){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=e.length,e},o.prototype.push=function(t){return new o(t,this)},o.prototype.lookup=function(t){var r,i=this.cache;if(i.hasOwnProperty(t))r=i[t];else{for(var a,o,s=this,c=!1;s;){if(t.indexOf(".")>0)for(r=s.view,a=t.split("."),o=0;null!=r&&o<a.length;)o===a.length-1&&(c=n(r,a[o])),r=r[a[o++]];else r=s.view[t],c=n(s.view,t);if(c)break;s=s.parent}i[t]=r}return e(r)&&(r=r.call(this.view)),r},s.prototype.clearCache=function(){this.cache={}},s.prototype.parse=function(e,n){var o=this.cache,s=o[e];return null==s&&(s=o[e]=function(e,n){function o(){if(b&&!x)for(;w.length;)delete m[w.pop()];else w=[];b=!1,x=!1}function s(t){if("string"==typeof t&&(t=t.split(d,2)),!l(t)||2!==t.length)throw new Error("Invalid tags: "+t);c=new RegExp(r(t[0])+"\\s*"),u=new RegExp("\\s*"+r(t[1])),h=new RegExp("\\s*"+r("}"+t[1]))}if(!e)return[];var c,u,h,p=[],m=[],w=[],b=!1,x=!1;s(n||t.tags);for(var k,j,S,I,T,U,C=new a(e);!C.eos();){if(k=C.pos,S=C.scanUntil(c))for(var E=0,A=S.length;E<A;++E)i(I=S.charAt(E))?w.push(m.length):x=!0,m.push(["text",I,k,k+1]),k+=1,"\n"===I&&o();if(!C.scan(c))break;if(b=!0,j=C.scan(y)||"name",C.scan(f),"="===j?(S=C.scanUntil(g),C.scan(g),C.scanUntil(u)):"{"===j?(S=C.scanUntil(h),C.scan(v),C.scanUntil(u),j="&"):S=C.scanUntil(u),!C.scan(u))throw new Error("Unclosed tag at "+C.pos);if(T=[j,S,k,C.pos],m.push(T),"#"===j||"^"===j)p.push(T);else if("/"===j){if(!(U=p.pop()))throw new Error('Unopened section "'+S+'" at '+k);if(U[1]!==S)throw new Error('Unclosed section "'+U[1]+'" at '+k)}else"name"===j||"{"===j||"&"===j?x=!0:"="===j&&s(S)}if(U=p.pop())throw new Error('Unclosed section "'+U[1]+'" at '+C.pos);return function(t){for(var e,r=[],n=r,i=[],a=0,o=t.length;a<o;++a)switch((e=t[a])[0]){case"#":case"^":n.push(e),i.push(e),n=e[4]=[];break;case"/":i.pop()[5]=e[2],n=i.length>0?i[i.length-1][4]:r;break;default:n.push(e)}return r}(function(t){for(var e,r,n=[],i=0,a=t.length;i<a;++i)(e=t[i])&&("text"===e[0]&&r&&"text"===r[0]?(r[1]+=e[1],r[3]=e[3]):(n.push(e),r=e));return n}(m))}(e,n)),s},s.prototype.render=function(t,e,r){var n=this.parse(t),i=e instanceof o?e:new o(e);return this.renderTokens(n,i,r,t)},s.prototype.renderTokens=function(t,e,r,n){for(var i,a,o,s="",c=0,l=t.length;c<l;++c)o=void 0,"#"===(a=(i=t[c])[0])?o=this.renderSection(i,e,r,n):"^"===a?o=this.renderInverted(i,e,r,n):">"===a?o=this.renderPartial(i,e,r,n):"&"===a?o=this.unescapedValue(i,e):"name"===a?o=this.escapedValue(i,e):"text"===a&&(o=this.rawValue(i)),void 0!==o&&(s+=o);return s},s.prototype.renderSection=function(t,r,n,i){var a=this,o="",s=r.lookup(t[1]);if(s){if(l(s))for(var c=0,u=s.length;c<u;++c)o+=this.renderTokens(t[4],r.push(s[c]),n,i);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)o+=this.renderTokens(t[4],r.push(s),n,i);else if(e(s)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(r.view,i.slice(t[3],t[5]),function(t){return a.render(t,r,n)}))&&(o+=s)}else o+=this.renderTokens(t[4],r,n,i);return o}},s.prototype.renderInverted=function(t,e,r,n){var i=e.lookup(t[1]);if(!i||l(i)&&0===i.length)return this.renderTokens(t[4],e,r,n)},s.prototype.renderPartial=function(t,r,n){if(n){var i=e(n)?n(t[1]):n[t[1]];return null!=i?this.renderTokens(this.parse(i),r,n,i):void 0}},s.prototype.unescapedValue=function(t,e){var r=e.lookup(t[1]);if(null!=r)return r},s.prototype.escapedValue=function(e,r){var n=r.lookup(e[1]);if(null!=n)return t.escape(n)},s.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.0",t.tags=["{{","}}"];var m=new s;return t.clearCache=function(){return m.clearCache()},t.parse=function(t,e){return m.parse(t,e)},t.render=function(t,e,r){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+function(t){return l(t)?"array":typeof t}(t)+'" was given as the first argument for mustache#render(template, view, partials)');return m.render(t,e,r)},t.to_html=function(r,n,i,a){var o=t.render(r,n,i);if(!e(a))return o;a(o)},t.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return p[t]})},t.Scanner=a,t.Context=o,t.Writer=s,t}),function(t){function e(e){this.$element=t(e),this.original_text=this.$element.html().trim(),this.settings=t.extend({},t.fn.trunk8.defaults)}function r(t){var e=document.createElement("DIV");return e.innerHTML=t,void 0!==e.textContent?e.textContent:e.innerText}function n(t){if(r(t)===t)return t.split(/\s/g);for(var e,i,a=[],o=/<([a-z]+)([^<]*)(?:>(.*?(?!<\1>)*)<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/gi,s=o.exec(t);s&&e!==o.lastIndex;)e=o.lastIndex,s[5]?a.push(s[5]):s[1]&&a.push({tag:s[1],attribs:s[2],content:s[3],after:s[4]}),s=o.exec(t);for(i=0;i<a.length;i++)"string"!=typeof a[i]&&a[i].content&&(a[i].content=n(a[i].content));return a}function i(e,r,n){e=e.replace(n,"");var i=function(r,a){var o,s,c,l,u="";for(l=0;l<r.length;l++)o=r[l],c=t.trim(e).split(" ").length,t.trim(e).length&&("string"==typeof o?(/<br\s*\/?>/.test(o)||(1===c&&t.trim(e).length<=o.length?(o=e,"p"!==a&&"div"!==a||(o+=n),e=""):e=e.replace(o,"")),u+=t.trim(o)+(l===r.length-1||c<=1?"":" ")):(s=i(o.content,o.tag),o.after&&(e=e.replace(o.after,"")),s&&(o.after||(o.after=" "),u+="<"+o.tag+o.attribs+">"+s+"</"+o.tag+">"+o.after)));return u},a=i(r);return a.slice(a.length-n.length)===n&&(a+=n),a}function a(){var e,a,o,c,u,h,p=this.data("trunk8"),f=p.settings,d=f.width,g=f.side,v=f.fill,y=f.parseHTML,m=s.getLineHeight(this)*f.lines,w=p.original_text,b=w.length,x="";if(this.html(w),u=this.text(),y&&r(w)!==w&&(h=n(w),b=(w=r(w)).length),d===l.auto){if(this.height()<=m)return;for(e=0,a=b-1;e<=a;)o=e+(a-e>>1),c=s.eatStr(w,g,b-o,v),y&&h&&(c=i(c,h,v)),this.html(c),this.height()>m?a=o-1:(e=o+1,x=x.length>c.length?x:c);this.html(""),this.html(x),f.tooltip&&this.attr("title",u)}else{if(isNaN(d))return void t.error('Invalid width "'+d+'".');o=b-d,c=s.eatStr(w,g,o,v),this.html(c),f.tooltip&&this.attr("title",w)}f.onTruncate()}var o,s,c={center:"center",left:"left",right:"right"},l={auto:"auto"};e.prototype.updateSettings=function(e){this.settings=t.extend(this.settings,e)},o={init:function(r){return this.each(function(){var n=t(this),i=n.data("trunk8");i||n.data("trunk8",i=new e(this)),i.updateSettings(r),a.call(n)})},update:function(e){return this.each(function(){var r=t(this);e&&(r.data("trunk8").original_text=e),a.call(r)})},revert:function(){return this.each(function(){var e=t(this).data("trunk8").original_text;t(this).html(e)})},getSettings:function(){return t(this.get(0)).data("trunk8").settings}},(s={eatStr:function(e,r,n,i){var a,o,l=e.length,u=s.eatStr.generateKey.apply(null,arguments);if(s.eatStr.cache[u])return s.eatStr.cache[u];if("string"==typeof e&&0!==l||t.error('Invalid source string "'+e+'".'),n<0||n>l)t.error('Invalid bite size "'+n+'".');else if(0===n)return e;switch("string"!=typeof(i+"")&&t.error("Fill unable to be converted to a string."),r){case c.right:return s.eatStr.cache[u]=t.trim(e.substr(0,l-n))+i;case c.left:return s.eatStr.cache[u]=i+t.trim(e.substr(n));case c.center:return a=l>>1,o=n>>1,s.eatStr.cache[u]=t.trim(s.eatStr(e.substr(0,l-a),c.right,n-o,""))+i+t.trim(s.eatStr(e.substr(l-a),c.left,o,""));default:t.error('Invalid side "'+r+'".')}},getLineHeight:function(e){var r=t(e).css("float");"none"!==r&&t(e).css("float","none");var n=t(e).css("position");"absolute"===n&&t(e).css("position","static");var i,a=t(e).html();return t(e).html("i").wrap('<div id="line-height-test" />'),i=t("#line-height-test").innerHeight(),t(e).html(a).css({float:r,position:n}).unwrap(),i}}).eatStr.cache={},s.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},t.fn.trunk8=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.trunk8"):o.init.apply(this,arguments)},t.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:c.right,tooltip:!0,width:l.auto,parseHTML:!1,onTruncate:function(){}}}(jQuery),jQuery.unserialize=function(t){for(var e=t.split("&"),r="{",n=[],i="",a=0;a<e.length;a++){var o=e[a].split(/=/);o[0].indexOf("%5B")>-1||o[0].indexOf("[")>-1?(void 0===n[i=o[0].indexOf("%5B")>-1?o[0].replace("%5B","").replace("%5D",""):o[0].replace("[","").replace("]","")]&&(n[i]=[]),n[i].push(decodeURIComponent(o[1].replace(/\+/g," ")))):o.length>1&&(r+='"'+o[0]+'": "'+decodeURIComponent(o[1].replace(/\+/g," ")).replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'", ')}r="{"!=r?r.substr(0,r.length-2)+"}":r+"}";var s=JSON.parse(r);for(arr in n)s[arr]=n[arr];return s},jQuery.fn.unserialize=function(t){var e="string"==typeof t?t.split("&"):t;if("object"!=typeof e)throw new Error("unserialize: string or JSON object expected.");e="string"==typeof t&&decodeURIComponent(t).indexOf("[]=")>-1?$.unserialize(t):e;for(var r in e){var n=e instanceof Array?e[r].split(/=/):[r,e[r]instanceof Array?e[r]:""+e[r]];if(n[0]=decodeURIComponent(n[0]),-1==n[0].indexOf("[]")&&n[1]instanceof Array&&(n[0]+="[]"),obj=this.find("[name='"+n[0]+"']"),0==obj.length)try{obj=this.parent().find("[name='"+n[0]+"']")}catch(t){}if("string"!=typeof obj.attr("type")||"radio"!=obj.attr("type").toLowerCase()&&"checkbox"!=obj.attr("type").toLowerCase())if(obj.length>0&&"SELECT"==obj[0].tagName&&n[1]instanceof Array&&obj.prop("multiple"))obj.val(n[1]);else{var i=n[1]instanceof Array?n[1].join(""):n[1];i="object"==typeof i||void 0===i?"":i,obj.val(decodeURIComponent(i.replace(/\+/g," ")))}else obj.each(function(t,e){if(e=$(e),n[1]instanceof Array)for(var r in n[1]){var i=""+n[1][r];e.attr("value")==decodeURIComponent(i.replace(/\+/g," "))?e.prop("checked",!0):$.inArray(e.val(),n[1])<0&&e.prop("checked",!1)}else i=""+n[1],e.attr("value")==decodeURIComponent(i.replace(/\+/g," "))?e.prop("checked",!0):e.prop("checked",!1)})}return this},function(t){var e=function(){var e="#gd-search-results",r=t(e).width(),n=r/Math.floor(r/240),i=e+"-css",a=t(i);0===a.length&&(a=t("<style>").attr("id",i).appendTo("head")),a.html(".result { width:"+n+"px; }")};t(function(){e()}),t(window).on("resize",function(){e()})}(jQuery),function(t){var e={basic:'[form="gd-search-form"]',advanced:'[form^="gd-search-field-"]'},r={headers:{},search:function(){t.ajax({method:"GET",url:"https://getdeals.co.in/api/v1/search",data:this.serializeData(),headers:this.headers,beforeSend:function(){r.state("load")},success:function(e){r.state("done");for(var n="",i=e.length,a=t("#gd-template-result").html(),o=0;o<i;o++)n+=Mustache.render(a,e[o]);var s=t(n);t("#gd-search-results").append(s),s.find(".title").trunk8({lines:2}),i?r.state("more"):t(".result").length?r.state("last"):r.state("none")},error:function(){r.state("error")}})},state:function(e){var r="gd-api-status-"+e,n=t("#"+r),i="";n.length&&(i='<div class="gd-api-status '+r+'">'+n.html()+"</div>"),t("#gd-search-footer").html(i)},serializeData:function(){var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(t(e[n]).serialize());return r=r.join("&").replace(/&?[^=&]+=(&|$)/g,"")},nextPage:function(){var e='[form="gd-search-field-page"]',n=parseInt(t(e).val())+1;t(e).val(n),r.search()}};t(function(){var n=window.location.search;n=t.unserialize(n.substring(1));for(var i in e)e.hasOwnProperty(i)&&t(e[i]).unserialize(n);t('script[type="text/html"]').each(function(){Mustache.parse(t(this).html())}),n.q&&r.search(),t("#gd-app").on("click","#gd-load-more-btn",function(){r.nextPage()}),t("#gd-app").on("click","#gd-try-again-btn",function(){r.search()}),t('#footer a[href="#about-getdeals"]').on("click",function(e){e.preventDefault(),t("#gd-search").hide(),t("#gd-about").show()})}),window.getdeals=function(t){r.headers=t}}(jQuery);